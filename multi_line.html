<!DOCTYPE html>
<head>
        <title>
            First Multi-series line Graph   
        </title>
        
        <script src="http://d3js.org/d3.v3.js"></script>
        <script type="text/javascript"></script>
        <style type = "text/css">
        </style>
</head>

<body>
    <script>
        //Margins
        var margin = {top: 20, right: 80, bottom: 30, left: 50},
                width = 500 - margin.left - margin.right,
                height = 960 - margin.top - margin.bottom;
        
        //Scales
        var x_scale = d3.time.scale()
                .range([0, width]);
        
        var y_scale = d3.scale.linear()
                .range([height, 0]);
         
        //Axis for the graph
        var x_axis = d3.svg.axis()
                .scale(x_scale)
                .orient("bottom")
                .ticks(5);
                
        var y_axis = d3.svg.axis()
                .scale(y_axis)
                .orient("left")
                .ticks(5);
        
        //Parse date
        var parse_date = d3.time.format("%Y-%m-%d").parse;
        console.log(parse_date('2011-03-05'));  //test to see how this function works (I can be removed)
        
        //SVG canvas        
        var svg = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                
        //Get data
        d3.tsv("multi_line.tsv", function(error, data) {
                x_scale.domain(d3.keys(data[0]).filter(function(key){return key !== "date";}));
                data.forEach(function(d){
                        d.date = parse_date(d.date);
                });
                
                var cities = x_scale.domain().map(function(name){
                        name: name;
                        values: data.map(function(d){
                                return {date: d.date, temperature: +d[name]}
                        })
                })

                x_scale.domain(d3.extent(data, function(d) {
                return d.date;
                }));
                y_scale.domain(d3.extent(data, function(d) {
                return d.temperature;
                }));
                console.log(cities);
        });
        

        
        
                
        

                
        
                
    </script>
        <p>
                Changes were made yet again!
        </p>
</body>
</html>
